
# Pricing setup
#
# If the user is logged in and is marked as a "dealer" (1 in the dealer
# field in the userdb database) then they are given quantity discounts
# based on price groups. (All products except gift_cert are in price group
# 1 as distributed.) If the quantity is 1, then pricing comes from the
# "wholesale" field in the products database.

AutoModifier pricing:price_group

# 
# If the user is not a dealer (or not logged in) then pricing just comes
# from "price". Any quantity discounts will be set in the qN fields in the
# database, and are separate from dealer quantity discounts.
# 
# The "gift_cert" AutoModifier allows special receipt, basket, and checkout
# display handling for items defined as a gift_cert. FractionalItems is
# required if you want to have non-even-dollar prices.

AutoModifier gift_cert
FractionalItems Yes

Profile dealer <<EOR
{ 
	CommonAdjust => <<EOF,

		pricing:w5,w10:,
		;:wholesale,
		;:wholesale:mv_sku,
		;$,
		==:options
EOF
	NonTaxableField => 'nontaxable',
}
EOR

Profile distributor <<EOR
{ 
	CommonAdjust => <<EOF,

		pricing:w5,w10:,
		;:wholesale,
		;:wholesale:mv_sku,
		;$,
		==:options,
		-10%
EOF
	NonTaxableField => 'nontaxable',
}
EOR

Profile default CommonAdjust   "pricing:price_group,q5,q10 :sale_price, ;:price, ;$, ==:options"
Profile default NonTaxableField 
Profile default PriceField 0

CommonAdjust   :sale_price, ;:price, ;$, ==:options
PriceField     0

OptionsEnable option_type

# Set variants as being eligble to contain ordered products
Replace ProductFiles
ProductFiles   products variants
