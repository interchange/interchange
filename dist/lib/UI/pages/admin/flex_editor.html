[strip int]
[calc]
	$CGI->{mv_data_table} = delete $CGI->{mv_return_table}
		if $CGI->{mv_return_table};
	return;
[/calc]
[tmp page_title]
	[either]
		[cgi page_title]
	[or]
		Table Edit: [cgi mv_data_table]
	[/either]
[/tmp]
[tmp page_banner]
	[either]
		[cgi page_banner]
	[or]
		[if cgi mv_data_table ne __UI_META_TABLE__]
		[if-mm super]
		Select for table edit:
		 [cgi mv_data_table]
		[if cgi ui_meta_view]
		 (<b>[page href="__UI_BASE__/flex_editor"
				 form='
				 mv_data_table=__UI_META_TABLE__
				 ui_meta_view=dbconfig
				 ui_data_fields=code name height field options attribute width type display_filter help help_url
				 ui_break_before=height display_filter
				 page_title=Change display information: [cgi mv_data_table]
				 ui_return_to=__UI_BASE__/gentable
				 ui_return_stack=1
				 item_id=[cgi ui_meta_view]::[cgi mv_data_table]
		 '][cgi ui_meta_view]</b> view</A>)
		 [/if]
		([page href="__UI_BASE__/flex_editor"
				 form='
				 mv_data_table=__UI_META_TABLE__
				 ui_meta_view=dbconfig
				 ui_data_fields=code name height field options attribute width type display_filter help help_url
				 ui_break_before=height display_filter
				 page_title=Change display information: [cgi mv_data_table]
				 ui_return_to=__UI_BASE__/gentable
				 ui_return_stack=1
				 item_id=[cgi mv_data_table]
		 ']standard view</A>)
		[/if-mm]
		 [/if]
	[or]
		[cgi page_title]
	[or]
		Select for table edit: [cgi mv_data_table]
	[/either]
[/tmp]
[seti table_perm][cgi mv_data_table]=v[/seti]
[seti help_name][either][cgi help_name][or]flex.meta[/either][/seti]
[seti icon_name][either][cgi icon_name][or]admin/icon_config.gif[/either][/seti]
[if !scratch ui_class][seti ui_class][either cgi ui_class][or]Admin[/either][/seti][/if]
[flag type=write table="[cgi mv_data_table]"]

[if cgi ui_new_item]
	[loop list="__MV_ITEM_TABLES__"]
		[flag type=write table="[loop-code]"]
	[/loop]
	[perl tables="[cgi mv_data_table]"]
		my $db = $Db{$CGI->{mv_data_table}} or return;
		unless ($db->config('AUTO_SEQUENCE')) {
			$db->config('AUTO_NUMBER', '000001')
				unless $db->config('AUTO_NUMBER');
			$CGI->{item_id} = $db->autonumber();
		}
		if ($CGI->{ui_clone_id}) {
			$CGI->{ui_clone_tables} = '__UI_ITEM_TABLES__';
			my $db = $Db{$CGI->{mv_data_table}} or return;
			return unless $db->record_exists($CGI->{ui_clone_id});
			my $ref = $db->row_hash($CGI->{ui_clone_id});
			$CGI->{ $db->config('KEY') } = $CGI->{item_id}
				if defined $CGI->{item_id};
			@{$CGI}{ keys %$ref } = values %$ref;
		}
		return;
	[/perl]
[/if]

[/strip]@_UI_STD_HEAD_@
[table-editor cgi=1]

<A HREF="[area href=admin/flex_editor
				form='
					item_id=[cgi item_id]
					mv_data_table=[value mv_data_table]
					page_title=Edit [value mv_data_table]: [cgi item_id]
					help_name=genedit
					ui_return_stack=1
					ui_data_fields_all=1
					ui_no_meta_display=1
					ui_hide_key=1
					icon_name=admin/icon_config.gif
					']">No meta display</A>
<!--
<XMP>
click:
[return-to click]

formlink:
[return-to formlink]

default:
[return-to]

Ok:
[scratch Ok]

Cancel:
[scratch Cancel]
</XMP>
-->

@_UI_STD_FOOTER_@

<!-- page: @@MV_PAGE@@ -->
